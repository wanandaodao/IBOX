<template>
  <view class="setting-container">
    <!-- é¡¶éƒ¨æ  -->
    <view class="header">
      <view class="back-icon" @click="goBack">
        <image src="/static/back.png" mode="aspectFit"></image>
      </view>
      <view class="title">è®¾ç½®ä¸­å¿ƒ</view>
      <view class="placeholder"></view>
    </view>
    
    <!-- è®¾ç½®é¡¹åˆ—è¡¨ -->
    <view class="setting-list">
      <!-- ç¬¬ä¸€ç»„ -->
      <view class="setting-group">
        <view class="setting-item" @click="navigateTo('/pages/mine/setting/personal-info')">
          <view class="item-left">
            <view class="icon-box profile-icon"></view>
            <text>ä¸ªäººä¿¡æ¯</text>
          </view>
          <view class="arrow"></view>
        </view>
        
        <view class="setting-item" @click="navigateTo('/pages/mine/verify')">
          <view class="item-left">
            <view class="icon-box verify-icon"></view>
            <text>å®åè®¤è¯</text>
          </view>
          <view class="item-right">
            <text class="status-text unverified">æœªå®å</text>
            <view class="arrow"></view>
          </view>
        </view>
        
        <view class="setting-item" @click="navigateTo('/pages/mine/setting/privacy')">
          <view class="item-left">
            <view class="icon-box privacy-icon"></view>
            <text>éšç§è®¾ç½®</text>
          </view>
          <view class="arrow"></view>
        </view>
        
        <view class="setting-item" @click="navigateTo('/pages/mine/security')">
          <view class="item-left">
            <view class="icon-box security-icon"></view>
            <text>å®‰å…¨ä¸­å¿ƒ</text>
          </view>
          <view class="arrow"></view>
        </view>
        
        <view class="setting-item" @click="navigateTo('/pages/mine/invoice')">
          <view class="item-left">
            <view class="icon-box invoice-icon"></view>
            <text>å¼€å…·å‘ç¥¨</text>
          </view>
          <view class="arrow"></view>
        </view>
      </view>
      
      <!-- ç¬¬äºŒç»„ -->
      <view class="setting-group">
        <view class="setting-item" @click="navigateTo('/pages/mine/help')">
          <view class="item-left">
            <view class="icon-box help-icon"></view>
            <text>å¸®åŠ©ä¸­å¿ƒ</text>
          </view>
          <view class="arrow"></view>
        </view>
        
        <view class="setting-item" @click="checkUpdate">
          <view class="item-left">
            <view class="icon-box update-icon"></view>
            <text>ç‰ˆæœ¬æ›´æ–°</text>
          </view>
          <view class="item-right">
            <text class="version-text">1.0.0</text>
            <view class="arrow"></view>
          </view>
        </view>
        
        <view class="setting-item" @click="navigateTo('/pages/mine/setting/about')">
          <view class="item-left">
            <view class="icon-box about-icon"></view>
            <text>å…³äºæˆ‘ä»¬</text>
          </view>
          <view class="arrow"></view>
        </view>
        
        <view class="setting-item" @click="navigateTo('/pages/mine/setting/privacypolicy')">
          <view class="item-left">
            <view class="icon-box privacy-policy-icon"></view>
            <text>éšç§æ”¿ç­–</text>
          </view>
          <view class="arrow"></view>
        </view>
      </view>
      
      <!-- ç¬¬ä¸‰ç»„ -->
      <view class="setting-group">
        <view class="setting-item" @click="deactivateAccount">
          <view class="item-left">
            <view class="icon-box deactivate-icon"></view>
            <text>æ³¨é”€è´¦å·</text>
          </view>
          <view class="arrow"></view>
        </view>
        
        <view class="setting-item" @click="logout">
          <view class="item-left">
            <view class="icon-box logout-icon"></view>
            <text>é€€å‡ºç™»å½•</text>
          </view>
          <view class="arrow"></view>
        </view>
      </view>
    </view>
  </view>
</template>

<script>
export default {
  data() {
    return {
      version: '2.1.01'
    }
  },
  methods: {
    goBack() {
      uni.navigateBack()
    },
    navigateTo(url) {
      uni.navigateTo({
        url
      })
    },
    checkUpdate() {
      uni.showToast({
        title: 'å·²æ˜¯æœ€æ–°ç‰ˆæœ¬',
        icon: 'none'
      })
    },
    deactivateAccount() {
      uni.showModal({
        title: 'æ³¨é”€è´¦å·',
        content: 'ç¡®å®šè¦æ³¨é”€æ‚¨çš„è´¦å·å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚',
        confirmText: 'ç¡®å®š',
        cancelText: 'å–æ¶ˆ',
        success: (res) => {
          if (res.confirm) {
            // è¿™é‡Œæ·»åŠ æ³¨é”€è´¦å·é€»è¾‘
            uni.showToast({
              title: 'è´¦å·æ³¨é”€ç”³è¯·å·²æäº¤',
              icon: 'none'
            })
          }
        }
      })
    },
    logout() {
      uni.showModal({
        title: 'é€€å‡ºç™»å½•',
        content: 'ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ',
        confirmText: 'ç¡®å®š',
        cancelText: 'å–æ¶ˆ',
        success: (res) => {
          if (res.confirm) {
            // è¿™é‡Œæ·»åŠ é€€å‡ºç™»å½•é€»è¾‘
            uni.clearStorageSync()
            uni.reLaunch({
              url: '/pages/index/index'
            })
          }
        }
      })
    }
  }
}
</script>

<style lang="scss">
.setting-container {
  min-height: 100vh;
  background-color: #f6f6f6;
  padding-bottom: 30rpx;
  
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 25px 15px 15px;
    background-color: #fff;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    
    .back-icon {
      width: 24px;
      height: 24px;
      
      image {
        width: 100%;
        height: 100%;
      }
    }
    
    .title {
      font-size: 18px;
      font-weight: bold;
      color: #333;
    }
    
    .placeholder {
      width: 24px;
      height: 24px;
    }
  }
  
  .setting-list {
    margin-top: 80px;
    
    .setting-group {
      background-color: #fff;
      border-radius: 10px;
      margin: 20rpx;
      overflow: hidden;
      
      & + .setting-group {
        margin-top: 20rpx;
      }
    }
    
    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 30rpx;
      position: relative;
      
      &:not(:last-child)::after {
        content: '';
        position: absolute;
        left: 30rpx;
        right: 0;
        bottom: 0;
        height: 1px;
        background-color: #f0f0f0;
      }
      
      .item-left {
        display: flex;
        align-items: center;
        
        .icon-box {
          width: 40rpx;
          height: 40rpx;
          margin-right: 20rpx;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 22rpx;
          color: #4B6CFF;
          background: rgba(75, 108, 255, 0.1);
          border-radius: 50%;
        }
        
        text {
          font-size: 28rpx;
          color: #333;
        }
      }
      
      .item-right {
        display: flex;
        align-items: center;
        
        .status-text {
          font-size: 24rpx;
          margin-right: 10rpx;
          
          &.unverified {
            color: #ff5a5a;
          }
        }
        
        .version-text {
          font-size: 24rpx;
          color: #999;
          margin-right: 10rpx;
        }
      }
      
      .arrow {
        width: 16rpx;
        height: 16rpx;
        border-top: 2rpx solid #ccc;
        border-right: 2rpx solid #ccc;
        transform: rotate(45deg);
      }
    }
  }
  
  // å›¾æ ‡æ ·å¼
  .profile-icon::before {
    content: "ğŸ‘¤";
  }
  
  .verify-icon::before {
    content: "âœ“";
  }
  
  .privacy-icon::before {
    content: "ğŸ”’";
  }
  
  .security-icon::before {
    content: "ğŸ›¡ï¸";
  }
  
  .invoice-icon::before {
    content: "ğŸ“„";
  }
  
  .help-icon::before {
    content: "â“";
  }
  
  .update-icon::before {
    content: "â†»";
  }
  
  .about-icon::before {
    content: "â„¹ï¸";
  }
  
  .privacy-policy-icon::before {
    content: "ğŸ“‹";
  }
  
  .deactivate-icon::before {
    content: "â›”";
  }
  
  .logout-icon::before {
    content: "â†ª";
  }
}
</style> 